{"ast":null,"code":"var _jsxFileName = \"/Users/sosokorn/Documents/Project/ten11-web-reactjs-nextjs/pages/product/[...id].js\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport \"../productList.css\";\nimport Layout from \"../../components/layouts/Layout\";\nimport Container from \"../../components/Containers/Container\";\nimport \"antd/dist/antd.css\";\nimport ProductItem from \"../../components/Products/ProductItem\";\nimport useSticky from \"../../shared/hooks/useSticky\";\nimport ProductListLoading from \"../../components/Loading/ProductListLoading\";\nimport ListSideBarMenu from \"../../components/Products/ListSideBarMenu\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { FiRefreshCw } from \"react-icons/fi\";\nimport { serviceApiFormData } from \"../../shared/hooks/seviceApi\";\n\nconst ProductList = props => {\n  const router = useRouter();\n  const {\n    page,\n    id,\n    slug\n  } = router.query;\n  const {\n    hideNav\n  } = useSticky;\n  const {\n    0: hasMore,\n    1: setHasMore\n  } = useState(true);\n  const {\n    0: listProduct,\n    1: setListProduct\n  } = useState([]); // useEffect(() => {\n  //   if (\n  //     props.props.product !== undefined &&\n  //     props.props.product.list !== undefined\n  //   ) {\n  //     if (Number(page) === 1) {\n  //       setListProduct(props.props.product.list);\n  //       localStorage.setItem(\"totalproduct\", props.props.product.total_record);\n  //     } else if (Number(page) > 1) {\n  //       setListProduct([...listProduct, ...props.props.product.list]);\n  //     }\n  //   }\n  // }, [props.props.product]);\n\n  function onChange(e) {\n    console.log(`checked = ${e.target.checked}`);\n  }\n\n  const loadItems = () => {\n    const totalProduct = localStorage.getItem(\"totalproduct\");\n    if (listProduct.length > 0) if (listProduct.length < Number(totalProduct)) {\n      setHasMore(true);\n      router.push(`/product/${slug}/?id=${id}&&page=${Number(page) + 1}`);\n    } else {\n      setHasMore(false);\n    }\n  };\n\n  const refresh = () => {};\n\n  const loader = __jsx(\"div\", {\n    className: \"load-more\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"load-more-block\",\n    onClick: props.onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, __jsx(FiRefreshCw, {\n    className: `${hasMore ? \"load-more-icon\" : \"no-load-more\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Load more...\"))); // if (props.isLoading) return <ProductListLoading />;\n\n\n  if (router.isFallback) {\n    return __jsx(ProductListLoading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, __jsx(ListSideBarMenu // mainCategory={slug[0]}\n  // paramsId={paramsId}\n  , {\n    category_name: slug[0],\n    hideNav: hideNav,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport async function getStaticPaths() {\n  const api = serviceApiFormData();\n  const res = await api.post(\"MenuApp/getMenu\");\n  const paths = res.data.menu.map(a => ({\n    params: {\n      id: a.category_id.toString()\n    }\n  }));\n  return {\n    // paths: [{ params: { slug: \"1\" } }],\n    paths,\n    fallback: true\n  };\n}\nexport async function getStaticProps({\n  params\n}) {\n  console.log(params); // const api = serviceApiFormData();\n  // const res = await api.post(\"MenuApp/getMenu\");\n  // const menu = res.data;\n  // const data = {\n  //   page: page,\n  //   category_id: id,\n  // };\n  // const productList = await api.post(\"ListProduct/getProductList\", data);\n  // const product = productList.data;\n\n  return {\n    props: {// menu,\n      // product,\n    }\n  };\n} // ProductList.getInitialProps = async (context) => {\n//   const { page, id } = context.query;\n//   try {\n//     const api = serviceApiFormData();\n//     const res = await api.post(\"MenuApp/getMenu\");\n//     const menu = res.data;\n//     const data = {\n//       page: page,\n//       category_id: id,\n//     };\n//     const productList = await api.post(\"ListProduct/getProductList\", data);\n//     const product = productList.data;\n//     return {\n//       props: {\n//         product,\n//         menu,\n//       },\n//     };\n//   } catch {\n//     return {\n//       props: {\n//         product: {},\n//         menu: {},\n//       },\n//     };\n//   }\n// };\n\nexport default ProductList;","map":{"version":3,"sources":["/Users/sosokorn/Documents/Project/ten11-web-reactjs-nextjs/pages/product/[...id].js"],"names":["React","useEffect","useState","useRouter","Layout","Container","ProductItem","useSticky","ProductListLoading","ListSideBarMenu","InfiniteScroll","FiRefreshCw","serviceApiFormData","ProductList","props","router","page","id","slug","query","hideNav","hasMore","setHasMore","listProduct","setListProduct","onChange","e","console","log","target","checked","loadItems","totalProduct","localStorage","getItem","length","Number","push","refresh","loader","onClick","isFallback","getStaticPaths","api","res","post","paths","data","menu","map","a","params","category_id","toString","fallback","getStaticProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport \"../productList.css\";\nimport Layout from \"../../components/layouts/Layout\";\nimport Container from \"../../components/Containers/Container\";\nimport \"antd/dist/antd.css\";\nimport ProductItem from \"../../components/Products/ProductItem\";\nimport useSticky from \"../../shared/hooks/useSticky\";\nimport ProductListLoading from \"../../components/Loading/ProductListLoading\";\nimport ListSideBarMenu from \"../../components/Products/ListSideBarMenu\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { FiRefreshCw } from \"react-icons/fi\";\nimport { serviceApiFormData } from \"../../shared/hooks/seviceApi\";\n\nconst ProductList = (props) => {\n  const router = useRouter();\n  const { page, id, slug } = router.query;\n  const { hideNav } = useSticky;\n  const [hasMore, setHasMore] = useState(true);\n  const [listProduct, setListProduct] = useState([]);\n\n  // useEffect(() => {\n  //   if (\n  //     props.props.product !== undefined &&\n  //     props.props.product.list !== undefined\n  //   ) {\n  //     if (Number(page) === 1) {\n  //       setListProduct(props.props.product.list);\n  //       localStorage.setItem(\"totalproduct\", props.props.product.total_record);\n  //     } else if (Number(page) > 1) {\n  //       setListProduct([...listProduct, ...props.props.product.list]);\n  //     }\n  //   }\n  // }, [props.props.product]);\n\n  function onChange(e) {\n    console.log(`checked = ${e.target.checked}`);\n  }\n\n  const loadItems = () => {\n    const totalProduct = localStorage.getItem(\"totalproduct\");\n    if (listProduct.length > 0)\n      if (listProduct.length < Number(totalProduct)) {\n        setHasMore(true);\n        router.push(`/product/${slug}/?id=${id}&&page=${Number(page) + 1}`);\n      } else {\n        setHasMore(false);\n      }\n  };\n\n  const refresh = () => {};\n  const loader = (\n    <div className=\"load-more\">\n      <div className=\"load-more-block\" onClick={props.onClick}>\n        <FiRefreshCw\n          className={`${hasMore ? \"load-more-icon\" : \"no-load-more\"}`}\n        />\n        <span>Load more...</span>\n      </div>\n    </div>\n  );\n\n  // if (props.isLoading) return <ProductListLoading />;\n  if (router.isFallback) {\n    return <ProductListLoading />;\n  }\n  return (\n    <React.Fragment>\n      {/* <Layout menu={props.props.menu.menu}> */}\n      <Container>\n        <div className=\"row\">\n          <ListSideBarMenu\n            // mainCategory={slug[0]}\n            // paramsId={paramsId}\n            category_name={slug[0]}\n            hideNav={hideNav}\n            onChange={onChange}\n          />\n          <div className=\"main\">\n            {/* <InfiniteScroll\n                className=\"rowChild\"\n                dataLength={listProduct.length || 0}\n                next={loadItems}\n                hasMore={hasMore}\n                loader={loader}\n                refreshFunction={refresh}\n                pullDownToRefresh\n                pullDownToRefreshThreshold={50}\n              >\n                {listProduct.map((item, index) => (\n                  <ProductItem key={index} {...item} />\n                ))}\n              </InfiniteScroll> */}\n          </div>\n        </div>\n      </Container>\n      {/* </Layout> */}\n    </React.Fragment>\n  );\n};\n\nexport async function getStaticPaths() {\n  const api = serviceApiFormData();\n  const res = await api.post(\"MenuApp/getMenu\");\n  const paths = res.data.menu.map((a) => ({\n    params: { id: a.category_id.toString() },\n  }));\n  return {\n    // paths: [{ params: { slug: \"1\" } }],\n    paths,\n    fallback: true,\n  };\n}\n\nexport async function getStaticProps({ params }) {\n  console.log(params);\n  // const api = serviceApiFormData();\n  // const res = await api.post(\"MenuApp/getMenu\");\n  // const menu = res.data;\n  // const data = {\n  //   page: page,\n  //   category_id: id,\n  // };\n  // const productList = await api.post(\"ListProduct/getProductList\", data);\n  // const product = productList.data;\n  return {\n    props: {\n      // menu,\n      // product,\n    },\n  };\n}\n\n// ProductList.getInitialProps = async (context) => {\n//   const { page, id } = context.query;\n//   try {\n//     const api = serviceApiFormData();\n//     const res = await api.post(\"MenuApp/getMenu\");\n//     const menu = res.data;\n//     const data = {\n//       page: page,\n//       category_id: id,\n//     };\n//     const productList = await api.post(\"ListProduct/getProductList\", data);\n//     const product = productList.data;\n//     return {\n//       props: {\n//         product,\n//         menu,\n//       },\n//     };\n//   } catch {\n//     return {\n//       props: {\n//         product: {},\n//         menu: {},\n//       },\n//     };\n//   }\n// };\n\nexport default ProductList;\n"]},"metadata":{},"sourceType":"module"}