{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport { createWrapper, HYDRATE } from \"next-redux-wrapper\";\nimport thunkMiddleware from \"redux-thunk\";\nimport rootReducer from \"./reducers/rootReducer\"; // BINDING MIDDLEWARE\n\nvar bindMiddleware = function bindMiddleware(middleware) {\n  if (true) {\n    var _require = require(\"redux-devtools-extension\"),\n        composeWithDevTools = _require.composeWithDevTools;\n\n    return composeWithDevTools(applyMiddleware.apply(void 0, _toConsumableArray(middleware)));\n  }\n\n  return applyMiddleware.apply(void 0, _toConsumableArray(middleware));\n};\n\nvar makeStore = function makeStore(_ref) {\n  var isServer = _ref.isServer;\n\n  if (isServer) {\n    //If it's on server side, create a store\n    return createStore(rootReducer, bindMiddleware([thunkMiddleware]));\n  } else {\n    //If it's on client side, create a store which will persist\n    var _require2 = require(\"redux-persist\"),\n        persistStore = _require2.persistStore,\n        persistReducer = _require2.persistReducer;\n\n    var storage = require(\"redux-persist/lib/storage\")[\"default\"];\n\n    var persistConfig = {\n      key: \"nextjs\",\n      whitelist: [\"counter\"],\n      // only counter will be persisted, add other reducers if needed\n      storage: storage // if needed, use a safer storage\n\n    };\n    var persistedReducer = persistReducer(persistConfig, rootReducer); // Create a new reducer with our existing reducer\n\n    var store = createStore(persistedReducer, bindMiddleware([thunkMiddleware])); // Creating the store again\n\n    store.__persistor = persistStore(store); // This creates a persistor object & push that persisted object to .__persistor, so that we can avail the persistability feature\n\n    return store;\n  }\n}; // Export the wrapper & wrap the pages/_app.js with this wrapper only\n\n\nexport var wrapper = createWrapper(makeStore);","map":{"version":3,"sources":["/Users/sosokorn/Documents/Project/ten11-web-reactjs-nextjs/store/store.js"],"names":["createStore","applyMiddleware","createWrapper","HYDRATE","thunkMiddleware","rootReducer","bindMiddleware","middleware","require","composeWithDevTools","makeStore","isServer","persistStore","persistReducer","storage","persistConfig","key","whitelist","persistedReducer","store","__persistor","wrapper"],"mappings":";AAAA,SAASA,WAAT,EAAsBC,eAAtB,QAA6C,OAA7C;AACA,SAASC,aAAT,EAAwBC,OAAxB,QAAuC,oBAAvC;AACA,OAAOC,eAAP,MAA4B,aAA5B;AACA,OAAOC,WAAP,MAAwB,wBAAxB,C,CAGA;;AACA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,UAAD,EAAgB;AACrC,YAA2C;AAAA,mBACTC,OAAO,CAAC,0BAAD,CADE;AAAA,QACjCC,mBADiC,YACjCA,mBADiC;;AAEzC,WAAOA,mBAAmB,CAACR,eAAe,MAAf,4BAAmBM,UAAnB,EAAD,CAA1B;AACD;;AACD,SAAON,eAAe,MAAf,4BAAmBM,UAAnB,EAAP;AACD,CAND;;AAQA,IAAMG,SAAS,GAAG,SAAZA,SAAY,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAClC,MAAIA,QAAJ,EAAc;AACZ;AACA,WAAOX,WAAW,CAACK,WAAD,EAAcC,cAAc,CAAC,CAACF,eAAD,CAAD,CAA5B,CAAlB;AACD,GAHD,MAGO;AACL;AADK,oBAEoCI,OAAO,CAAC,eAAD,CAF3C;AAAA,QAEGI,YAFH,aAEGA,YAFH;AAAA,QAEiBC,cAFjB,aAEiBA,cAFjB;;AAGL,QAAMC,OAAO,GAAGN,OAAO,CAAC,2BAAD,CAAP,WAAhB;;AACA,QAAMO,aAAa,GAAG;AACpBC,MAAAA,GAAG,EAAE,QADe;AAEpBC,MAAAA,SAAS,EAAE,CAAC,SAAD,CAFS;AAEI;AACxBH,MAAAA,OAAO,EAAPA,OAHoB,CAGX;;AAHW,KAAtB;AAKA,QAAMI,gBAAgB,GAAGL,cAAc,CAACE,aAAD,EAAgBV,WAAhB,CAAvC,CATK,CASgE;;AACrE,QAAMc,KAAK,GAAGnB,WAAW,CACvBkB,gBADuB,EAEvBZ,cAAc,CAAC,CAACF,eAAD,CAAD,CAFS,CAAzB,CAVK,CAaF;;AAEHe,IAAAA,KAAK,CAACC,WAAN,GAAoBR,YAAY,CAACO,KAAD,CAAhC,CAfK,CAeoC;;AAEzC,WAAOA,KAAP;AACD;AACF,CAvBD,C,CAyBA;;;AACA,OAAO,IAAME,OAAO,GAAGnB,aAAa,CAACQ,SAAD,CAA7B","sourcesContent":["import { createStore, applyMiddleware } from \"redux\";\nimport { createWrapper, HYDRATE } from \"next-redux-wrapper\";\nimport thunkMiddleware from \"redux-thunk\";\nimport rootReducer from \"./reducers/rootReducer\";\n\n\n// BINDING MIDDLEWARE\nconst bindMiddleware = (middleware) => {\n  if (process.env.NODE_ENV !== \"production\") {\n    const { composeWithDevTools } = require(\"redux-devtools-extension\");\n    return composeWithDevTools(applyMiddleware(...middleware));\n  }\n  return applyMiddleware(...middleware);\n};\n\nconst makeStore = ({ isServer }) => {\n  if (isServer) {\n    //If it's on server side, create a store\n    return createStore(rootReducer, bindMiddleware([thunkMiddleware]));\n  } else {\n    //If it's on client side, create a store which will persist\n    const { persistStore, persistReducer } = require(\"redux-persist\");\n    const storage = require(\"redux-persist/lib/storage\").default;\n    const persistConfig = {\n      key: \"nextjs\",\n      whitelist: [\"counter\"], // only counter will be persisted, add other reducers if needed\n      storage, // if needed, use a safer storage\n    };\n    const persistedReducer = persistReducer(persistConfig, rootReducer); // Create a new reducer with our existing reducer\n    const store = createStore(\n      persistedReducer,\n      bindMiddleware([thunkMiddleware])\n    ); // Creating the store again\n\n    store.__persistor = persistStore(store); // This creates a persistor object & push that persisted object to .__persistor, so that we can avail the persistability feature\n\n    return store;\n  }\n};\n\n// Export the wrapper & wrap the pages/_app.js with this wrapper only\nexport const wrapper = createWrapper(makeStore);"]},"metadata":{},"sourceType":"module"}